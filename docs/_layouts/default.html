<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }} - {{ site.title }}</title>
    
    <!-- Mermaid CSS (可选) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        /* Mermaid 图表样式 */
        .mermaid {
            text-align: center;
            margin: 2rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            overflow: auto;
        }
        
        /* 暗色主题支持 */
        @media (prefers-color-scheme: dark) {
            .mermaid {
                background: #2d2d2d;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>{{ site.title }}</h1>
        <nav>
            <a href="/">首页</a> |
            <a href="/about">关于</a>
        </nav>
    </header>
    
    <main>
        {{ content }}
    </main>
    
    <footer>
        <p>&copy; {{ site.time | date: '%Y' }} {{ site.title }}</p>
    </footer>

    <!-- Mermaid JS -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@{{ site.mermaid.version }}/dist/mermaid.min.js"></script>
    <script>
        // 初始化 Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 
                   '{{ site.mermaid.theme.dark }}' : '{{ site.mermaid.theme.light }}'
        });

        
        // 监听主题变化
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            mermaid.initialize({
                theme: event.matches ? '{{ site.mermaid.theme.dark }}' : '{{ site.mermaid.theme.light }}'
            });
        });
    </script>
</body>
</html>
